<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Zombie Game</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>
  <body>
    <audio id="gunshot">
      <source src="audio/Gunsound.mp3" />
    </audio>
    <h1 id="title">Zombie Game</h1>
    <table id="table">
        <tr>
          <td>
            <p id="score"></p>
          </td>
        </tr>
      <tr>
        <td>
          <button id="start">Start</button>
          <button id="reset">Replay</button>
        </td>
      </tr>
      </table>
    <div class="section">

    </div>

    <div class="mainDiv">
      <img id="aliveone" src="img/running.gif" alt="runner" width="200px" height="150px"/>
      <img id="deadone" src="img/dead.gif" alt="dead" width="200px" height="150px" />
    </div>
    <script>
      // display score
      let score_onscreen = 0;
      let zombie = document.getElementById("aliveone");
      let dead_zombie = document.getElementById("deadone");
      img_hider(zombie);

      function zombie_starting_point()
      {
        img_display(zombie);
        let screenWidth = window.innerWidth;
        let screenHeight = window.innerHeight;
        let img_width = 200;
        let img_height = 150;
        let mid_x = screenWidth / 2 - img_width +100;
        let mid_y = screenHeight / 2 - img_height - 15;
        zombie.style.display = "block";
        zombie.style.marginLeft = mid_x + "px";
        zombie.style.marginTop = mid_y + "px";
        setInterval(random_locator, 2000);
        // setTimeout(function(){img_hider(zombie)}, 2000);
      }

      function initial_display(score)
      {
        document.getElementById("score").innerHTML = score;
      }

      initial_display(score_onscreen);

      function zapped(score) {
        score++;
        document.getElementById("score").innerHTML = score;
      }


      function random_locator() {
        let width = window.innerWidth;
        let height = window.innerHeight;
        let img_width = 200;
        let img_height = 150;
        zombie.style.display = "block";
        width_value = Math.floor(Math.random() * (width - img_width));
        height_value = Math.floor(Math.random() * (height - img_height*2));
        zombie.style.marginLeft = width_value + "px";
        zombie.style.marginTop = height_value + "px";
      }

      function img_hider(whichzombie) {
        whichzombie.style.display = "none";
      }

      function img_display(whichzombie) {
        whichzombie.style.display = "block";
      }

      //   Initially hide dead zombie
      img_hider(dead_zombie);
      // Create onclick event for zombie
      zombie.onclick = function() {
        // Hide original zombie
        document.getElementById('gunshot').play();
        img_hider(zombie);
        // Copy original zombie's margin properties and set dead zombie's
        // dead_zombie.style.display='inline';
        dead_zombie.style.marginLeft = zombie.style.marginLeft;
        dead_zombie.style.marginTop = zombie.style.marginTop;
        img_display(dead_zombie);
        // Make it disappear
        setTimeout(function(){img_hider(dead_zombie)}, 2000);
        // Increment score
        let score_val = document.getElementById("score").innerHTML;
        zapped(score_val);
        // TO DO: move zombie to random position
      };

      document.getElementById('start').onclick=zombie_starting_point;
      // setInterval(random_locator, 2000);


    </script>
  </body>
</html>